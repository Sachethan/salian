<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sachethan Salian</title>
 
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
  
  <style>
     #notificationBox {
      display: none;
      border: 2px solid #4CAF50;
      padding: 15px;
      background: #f1f1f1;
      border-radius: 8px;
    }
  
  #messageContainer{
  position: fixed;
    top: 10%;
    left: 50%;
    width:90%;
    transform: translateX(-50%);
    z-index: 9999;
  }
    .message-box {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 1rem;
    border-radius: 50px;
    font-size: 0.875rem;
    margin-top: 0.1rem;
    text-align: left;
    opacity: 0;
    transform: translateY(-10px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    position: relative;
    max-width: 600px;
    margin-inline: auto;
}

.message-box.show {
    opacity: 1;
    transform: translateY(0);
}

.success-message {
    background-color: #d1fae5;
    color: #065f46;
    border: 1px solid #6ee7b7;
}

.error-message {
    background-color: #fee2e2;
    color: #991b1b;
    border: 1px solid #fca5a5;
}

.close-btn {
    background: none;
    border: none;
    font-weight: bold;
    font-size: 1.1rem;
  margin: 0;
    cursor: pointer;
    color: inherit;
    margin-left: 12px;
}
 .email-status-message {
     font-size: 0.75rem;
     margin-top: 0.25rem;
     margin-left: 0.25rem;
     height: 1rem; /* Reserve space to prevent layout shift */
     }
.info-message {
    background-color: #e0f2fe; /* Light blue */
    color: #0369a1;            /* Darker blue */
    border: 1px solid #7dd3fc;
}

.message-box span a {
    color: inherit;
    text-decoration: underline;
    font-weight: 500;
}

  </style>
</head>
<body>
  <header>
    <nav class="container nav-container">
      <h1 class="logo">
  <img src="https://sachethan.github.io/salian/logo.png" alt="Gallery of Salian" style="height: 40px;">
</h1>
      <ul class="nav-links" id="navLinks">
        <li><a href="#home">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#services">Services</a></li>
        <li><a href="#youtube">Portfolio</a></li>
        <li><a href="#contact">Contact</a></li>
        </ul>
      <div class="nav-actions">              
        <button id="profileButton" title="Profile Page"
             style="display:none;" class="px-4 py-2 bg-white border rounded-md shadow-sm hover:bg-gray-100 focus:outline-none"><i class="fa-solid fa-circle-user"></i>
      </button>
        
        <!-- Dropdown -->
    <div id="profileDropdown">
        <div class="dropdown-item dropdown-header">ðŸ‘‹ Hello, <span id="userPname"></span></div>
        <a href="./editprofile.html" class="dropdown-item">Edit Profile</a>
        <button id="logoutButton">Logout</button>
      </div>
        
   <label class="theme-switch">
  <input type="checkbox" id="themeToggle">
  <span class="slider"></span>
   
</label>
     <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
      </div>
    </nav>
  </header>
<div id="messageContainer" style=""></div>

  <div class="loader" id="loader">
   <div class="spinner"></div>
  </div>
  
  <div id="super-popup">
    <div class="dloader"></div>
    <div>Preparing your download...</div>
  </div>
<!-- Overlay + Popup -->
<div id="popupOverlay" class="overlay">
  <div class="popup-box">
    <p>âœ… Request message updated.<br>Feel free to edit it if needed.</p>
    <button onclick="closePopup()">OK</button>
  </div>
</div>
  <section id="home" class="hero">
    <div class="container">
      <h2>Hello <span id="userdisplay">....</span>, Im Sachethan</h2>
      <p> | Digital Creator | </p>
      <button onclick="window.location.href = '#footer';" class="btn">Lets Go<i class="fa-solid fa-wind"></i></button>
      <button id="download-app" onclick="window.location.href = 'https://www.dropbox.com/scl/fi/qe0t7iwtd4aq7uz84khod/Sachethan-Salian.apk?rlkey=7mndyfbtwp09tucfgi6gp74tu&st=ipkcm6hv&dl=1';" download="SachethanApp.apk" class="btn">Download <i class="fa-brands fa-android"></i></button>
      <button class="lbtn" onclick="window.location.href='login/login.html';" id="loginpage" title="login page">Login <i class="fa-solid fa-right-to-bracket"></i></button>
    </div>
  </section>
  
   <section id="services" class="section container">
    <h2>Contact Me For</h2>
    <div class="grid">
      <a href="#contact" class="service-card" data-service="ðŸ“· Photo Editing"><div class="card">ðŸ“· Photo Editing</div>
</a>
      <a href="#contact" class="service-card" data-service="ðŸŽ¨ Poster Design"><div class="card">ðŸŽ¨ Poster Design</div>
</a>
      <a href="#contact" class="service-card" data-service="ðŸ§© Logo Design"><div class="card">ðŸ§© Logo Design</div>
</a>
      <a href="#contact" class="service-card" data-service="ðŸŽ¬ Video Editing"><div class="card">ðŸŽ¬ Video Editing</div>
</a>
      <a href="#contact" class="service-card" data-service="ðŸ“± Social Media Creatives"><div class="card">ðŸ“± Social Media Creatives</div>
</a>
      <a href="#contact" class="service-card" data-service="âœ¨ Web Design (Ai Code)"><div class="card">âœ¨ Web Design (Ai Code)</div>
</a>
    </div>
        </section>

<section id="youtube" class="section container moregap">
    <h2>Youtube Channel</h2>
        
<!-- Elfsight YouTube Gallery | Untitled YouTube Gallery -->
<script src="https://static.elfsight.com/platform/platform.js" async></script>
<div class="elfsight-app-9c8a0458-04a9-4e4a-a944-0385bbc9f7ff" data-elfsight-app-lazy></div>
      </section>
        
<section id="insta" class="section container moregap">
    <h2>Instagram</h2>
<!-- Elfsight Instagram Feed | Untitled Instagram Feed -->
<script src="https://static.elfsight.com/platform/platform.js" async></script>
<div class="elfsight-app-909f0c5d-fb2d-49ce-9fbd-92f210d7c01c" data-elfsight-app-lazy></div>
      </section>
    
        
  <section style="display:none;"id="portfolio" class="section container">
    <h2>Portfolio</h2>
    <div class="grid_2">
     <div class="portfolio-item">
  <img id="sample1-img" alt="Logo Design Sample 1" />
  <p>Logo Design</p>
</div>

<div class="portfolio-item">
  <img id="sample2-img" alt="Poster Design Sample 2" />
  <p>Poster Design</p>
</div>

<div class="portfolio-item">
  <img id="sample3-img" alt="Invitation Design Sample 3" />
  <p>Invitation Design</p>
</div>
      <div class="portfolio-item">
  <img id="sample4-img" alt="Invitation Design Sample 3" />
  <p>Invitation Design</p>
</div>
  </section>

 <section id="about" class="section container">
    <h2>About Me</h2>
    <p>I am a creative freelancer offering services in photo editing, poster design, logo making, video editing, and more. I turn ideas into visuals that connect with your audience.</p>
  </section>
<section id="notify" class="section container">
    <div id="notificationBox">
    <h3>New Notification</h3>
    <p><strong>Title:</strong> <span id="notifTitle"></span></p>
    <p><strong>Message:</strong> <span id="notifMessage"></span></p>
  </div>
</section>

  <section class="contact" id="contact">
  <h2>Contact Details</h2>
  <div class="contact-container">
    <div class="contact-info">
      <p>I'd love to hear from you! Whether it's a project, question, or just to say hello â€” feel free to get in touch.</p>
      <div class="info-box">
        <i class="fa-solid fa-envelope"></i>
        <a href="mailto:sachethansalian@gmail.com">sachethansalian@gmail.com</a>
      </div>
      <div class="info-box">
        <i class="fa-brands fa-instagram"></i>
        <a href="https://instagram.com/sachethan_salian_creation" target="_blank">@sachethan_salian_creation</a>
      </div>
      </div>

    <form class="contact-form" id="contactForm">
  <input type="text" id="name" name="name" placeholder="Your Name"/>
  <input type="email" id="email" name="email" placeholder="Your Email"/>
  <textarea id="requestInput" name="message" rows="5" placeholder="Your Message" required></textarea>
  <button type="submit">Send Request Message</button>
  <p id="formResponse" style="margin-top:10px;"></p>
</form>
  </div>
</section>

  <footer id="footer" class="footer">
    <p>Â© 2025 Sachethan salian. All rights reserved.</p>
  </footer>

  <script src="script.js"></script>
  <script src="mail.js"></script>
  <script src="https://sachethan.github.io/salian/image.js"></script>
<script>
let messageIdCounter = 0; // Declare at top before any function uses it

function showMessage(messageHTML, type = 'error', redirectUrl = null) {
    const container = document.getElementById('messageContainer');

    const messageBox = document.createElement('div');
    messageBox.className = 'message-box';

    if (type === 'success') messageBox.classList.add('success-message');
    else if (type === 'info') messageBox.classList.add('info-message');
    else messageBox.classList.add('error-message');

    const id = `message-${++messageIdCounter}`;
    messageBox.id = id;

    const span = document.createElement('span');
    span.innerHTML = messageHTML;

    const closeBtn = document.createElement('button');
    closeBtn.innerHTML = '<i class="fa-solid fa-close"></i>';
    closeBtn.className = 'close-btn';
    closeBtn.onclick = () => hideMessage(id);

    messageBox.appendChild(span);
    messageBox.appendChild(closeBtn);
    container.appendChild(messageBox);

    requestAnimationFrame(() => {
        messageBox.classList.add('show');
    });

    if (redirectUrl) {
        messageBox.style.cursor = 'pointer';
        messageBox.addEventListener('click', () => {
            window.location.href = redirectUrl;
        });
    }

    setTimeout(() => hideMessage(id), 10000); // auto-dismiss
}

function hideMessage(id) {
    const el = document.getElementById(id);
    if (el) {
        el.classList.remove('show');
        setTimeout(() => {
            if (el.parentNode) el.parentNode.removeChild(el);
        }, 300);
    }
}

function logout() {
   showMessage(
  "<strong>Status:</strong> Logout done successfully",
  "info"
            );    ['deletedaccount', 'isLoggedIn', 'userEmail', 'username', 'tempname', 'tempemail', 'user', 'userInfo'].forEach(k => localStorage.removeItem(k));
            setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â      window.location.href = 'index.html';
Â  Â  Â  Â  Â  Â  }, 1000);
}

function isWebView() {
    const ua = navigator.userAgent || navigator.vendor || window.opera;
    return (
        ua.includes("wv") || // Android WebView
        (ua.includes("Android") && ua.includes("Version/")) || // Old Android WebView
        window.navigator.standalone === true // iOS
    );
}

// Initial setup
document.addEventListener("DOMContentLoaded", function () {
    const nameInput = document.getElementById("name");
    const emailInput = document.getElementById("email");
    const userdisplay = document.getElementById("userdisplay");
    const profileDropdown = document.getElementById("profileDropdown");
    const loginMessageDiv = document.getElementById('loginMessage');
    const loader = document.getElementById("loader"); // Ensure this exists

    const tempname = localStorage.getItem("tempname");
    const tempemail = localStorage.getItem("tempemail");
    const isLoggedIn = localStorage.getItem("isLoggedIn");

    if (!isLoggedIn) {
        nameInput.disabled = false;
        emailInput.disabled = false;
        nameInput.required = true;
        emailInput.required = true;

        document.querySelector("input[name='name']").value = tempname || '';
        document.querySelector("input[name='email']").value = tempemail || '';
        if (userdisplay) userdisplay.textContent = tempname || '';
    } else {
        loader.classList.add('show');
        document.getElementById("profileButton").style.display = "inline-block";
        document.getElementById("loginpage").style.display = "none";

        nameInput.disabled = true;
        emailInput.disabled = true;
        nameInput.required = false;
        emailInput.required = false;

        if (localStorage.getItem('usergd')) {          
         showMessage(
                "<strong>Hello,..</strong> Your login was successful. Now you can use advanced options on this website.",
                "info"
            );
          localStorage.removeItem('usergd');
          setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  profileDropdown.style.display = 'block';
Â  Â  Â  Â  Â  Â  }, 15000);
        }
    }

    // If inside WebView, hide download banner
    if (isWebView()) {
        document.getElementById("download-app").style.display = "none";
    }

    // Show popup notification if query params are present
    const params = new URLSearchParams(window.location.search);
    const title = params.get("title");
    const msg = params.get("msg");

    if (title && msg) {
        document.getElementById("notifTitle").textContent = title;
        document.getElementById("notifMessage").textContent = msg;
        document.getElementById("notificationBox").style.display = "block";
    }

    // Load stored user data
    const storedData = localStorage.getItem("userInfo");
    if (storedData) {
        const userInfo = JSON.parse(storedData);
        userdisplay.textContent = userInfo.username;
        document.getElementById("userPname").textContent = userInfo.username;
        document.querySelector("input[name='name']").value = userInfo.email;
      loader.classList.remove('show');
    } else {
      loader.classList.remove('show');
        showMessage(
            "<strong>Note:</strong> If you're a new user, please click to <a href='#' id='registerMessageLink'>Register</a>, if not then <a href='login/login.html'>Login</a>.",
            "info"
        );
        window.location.href = '#';
    }

    // Register click handler
    document.body.addEventListener("click", function (e) {
        if (e.target && e.target.id === "registerMessageLink") {
            e.preventDefault();
            localStorage.setItem("showRegister", "true");
            window.location.href = "login/login.html";
        }
    });

    // Profile toggle
    const profileBtn = document.getElementById('profileButton');
    if (profileBtn) {
        profileBtn.addEventListener('click', () => {
            profileDropdown.style.display = profileDropdown.style.display === 'block' ? 'none' : 'block';
        });

        document.addEventListener('click', (e) => {
            if (!profileBtn.contains(e.target) && !profileDropdown.contains(e.target)) {
                profileDropdown.style.display = 'none';
                localStorage.removeItem('usergd');
            }
        });
    }

    // Logout button
    const logoutBtn = document.getElementById('logoutButton');
    if (logoutBtn) {
        logoutBtn.addEventListener('click', () => {
            if (confirm("Are you sure you want to log out?")) {
                logout();
            }
        });
    }

    // Download popup + redirect
    const downloadAppBtn = document.getElementById("download-app");
    if (downloadAppBtn) {
        downloadAppBtn.addEventListener("click", function (e) {
            const popup = document.getElementById("super-popup");
            popup.style.display = "flex";

            setTimeout(() => {
                window.location.href = 'https://www.dropbox.com/scl/fi/qe0t7iwtd4aq7uz84khod/Sachethan-Salian.apk?rlkey=7mndyfbtwp09tucfgi6gp74tu&st=ipkcm6hv&dl=1';
            }, 800);

            setTimeout(() => {
                popup.style.display = "none";
            }, 7000);
        });
    }
});

window.addEventListener("error", function (e) {
Â  showMessage(
Â  Â  `<strong>Unexpected Error:</strong> Please contact <a href="support.html" style="text-decoration:underline;">Technical Support</a>.`,
Â  Â  "error"
Â  );
});

window.addEventListener("unhandledrejection", function (e) {
Â  showMessage(
Â  Â  `<strong>App Error:</strong> Please contact <a href="support.html" style="text-decoration:underline;">Technical Support</a>.`,
Â  Â  "error"
Â  );
});

</script>

  </body>
</html>
